// --- Soru Verisi (KPSS Genel Yetenek - 20 Soru) ---
const sorular = [
    {
        soru: "1. Şairin, 'Söz uçar, yazı kalır.' atasözünü doğrularcasına, yazdıklarıyla kalıcılığı yakalayan sanatçılarımızdan biri olduğu aşikârdır. Edebiyatımızın köşe taşlarından biri olan bu şair, yazdığı her şiirde özgünlüğünü ve derinliğini korumuştur. Ona göre şiir, hayatın içinden gelen, samimi ve yalın bir anlatımı benimsemelidir. Günlük yaşamın sıradan anları bile onun kaleminde estetik bir değere dönüşür. Onun bu yaklaşımı, okuyucunun kendini şiirde bulmasını sağlar, bu da eserlerinin nesiller boyu okunmasının başlıca sebebidir. Bu parçada sözü edilen şairle ilgili olarak aşağıdakilerden hangisine değinilmemiştir?",
        secenekler: {
            a: "Eserleriyle kalıcılığı yakaladığına",
            b: "Şiirlerinde günlük yaşamı konu edindiğine",
            c: "Şiirinin yalın bir anlatıma sahip olması gerektiğine",
            d: "Farklı konularda pek çok şiir kaleme aldığına",
            e: "Şiirlerinin okuyucuyla bağ kurduğuna"
        },
        dogruCevap: "d" 
    },
    {
        soru: "2. (I) Geleneksel sanatlarımızdan olan çini, kil ve toprağın belirli bir sıcaklıkta pişirilmesiyle elde edilir. (II) Sonraki aşamada ise bu hamur, geleneksel motiflerle süslenir. (III) Geçmişten günümüze kadar gelen çini sanatı, özellikle cami, köşk ve saray gibi yapılarda mimariyi tamamlayıcı unsur olarak kullanılmıştır. (IV) Yapıldığı dönemin sanat anlayışını yansıtan çiniler, üzerindeki desenler ve renklerle mimari eserlere canlılık katar. (V) Çininin bu canlılığı ve dayanıklılığı, onun uzun ömürlü olmasını sağlamıştır. Bu parçadaki numaralanmış cümlelerle ilgili olarak aşağıdakilerden hangisi yanlıştır?",
        secenekler: {
            a: "I. cümlede, çini yapımının ana malzemesi ve süreci belirtilmiştir.",
            b: "II. cümlede, kullanılan motiflerin tarihsel süreci açıklanmıştır.",
            c: "III. cümlede, çini sanatının kullanım alanlarına örnek verilmiştir.",
            d: "IV. cümlede, çinilerin sanatsal özelliklerine değinilmiştir.",
            e: "V. cümlede, çininin özelliklerinin dayanıklılığı beraberinde getirdiği ifade edilmiştir."
        },
        dogruCevap: "b"
    },
    {
        soru: "3. Hayatın karmaşasından ve yoğunluğundan bunalan pek çok insan, kendine yeni hobiler edinerek bu karmaşadan ---- uzaklaşmak istiyor. Resim, müzik, seramik gibi el sanatları; insanların hem boş zamanlarını verimli geçirmelerini sağlıyor hem de onların ruh hâllerini olumlu yönde etkiliyor. Bu hobiler, ---- hayatımıza dâhil olduğu an itibarıyla bizi daha yaratıcı ve daha mutlu bireyler hâline getiriyor. Bu parçada boş bırakılan yerlere sırasıyla aşağıdakilerden hangisi getirilmelidir?",
        secenekler: {
            a: "bir nebze de olsa – yavaş yavaş",
            b: "olabildiğince – hızla",
            c: "tamamen – günden güne",
            d: "kısmen – gittikçe",
            e: "bir ölçüde – zorlukla"
        },
        dogruCevap: "a"
    },
    {
        soru: "4. Çağımızda her şeyin bir fiyata sahip olduğu, her şeyin alınıp satılabileceği bir dünyada yaşıyoruz. Hatta bazı şeylerin piyasa değerinin olması gerektiğinden de fazla. Bu durum, bize bir şeyin değeri hakkında her şeyi paranın belirleyemeyeceğini, her şeyi ölçüp biçemeyeceğini hatırlatıyor. Böylelikle de hayatımızda paranın ötesine geçen, paha biçilemez şeylerin de var olduğu gerçeğiyle yüzleşiyoruz. Bu parçadan hareketle, aşağıdakilerin hangisine ulaşılabilir?",
        secenekler: {
            a: "Bazı şeylerin değerinin, parasal karşılığıyla belirlenemeyeceği",
            b: "Günümüz dünyasında her şeye bir fiyat belirlendiği",
            c: "Her şeyin alınıp satıldığı bir ortamda yaşadığımız",
            d: "Yaşanan karmaşık durumların parayla çözülmeyeceği",
            e: "Paranın gücünün bazı durumları etkilemediği"
        },
        dogruCevap: "a"
    },
    {
        soru: "5. Çocukluğumuzdan itibaren çevremizdeki insanlardan sürekli yeni bilgiler edinir, bu bilgileri bir süzgeçten geçiririz. Bu, bilginin ne kadar doğru ve güvenilir olduğunu belirleme yeteneğimizi geliştirir. Bilgiyi sorgulama ve eleştirel düşünme becerisi, sadece eğitim hayatımızda değil, yaşamımızın her alanında bize rehberlik eder. Bu yetenek sayesinde yanıltıcı bilgileri, asıl bilgiden ayırt edebilir, doğru kararlar alabiliriz. Bu parçada asıl anlatılmak istenen aşağıdakilerden hangisidir?",
        secenekler: {
            a: "Bilginin doğruluğunu kanıtlama yeteneğinin çocuklukta kazanıldığı",
            b: "Eğitim hayatının, bilgiyi sorgulama becerisini geliştirdiği",
            c: "Eleştirel düşünme becerisinin, doğru bilgiye ulaşmada önemli olduğu",
            d: "Edinilen bilgilerin süzgeçten geçirilme sürecinin zor olduğu",
            e: "Doğru kararlar almanın ancak bilgiyi eleştirel süzgeçten geçirmekle mümkün olacağı"
        },
        dogruCevap: "c"
    },
    {
        soru: "6. (I) Dil, insana ait en önemli iletişim aracı ve kültür taşıyıcısıdır. (II) Dilin önemi, sadece bireyler arası iletişimi sağlamakla sınırlı değildir. (III) Aynı zamanda bir milletin tarihini, geleneklerini ve yaşayış biçimini de içinde barındırır. (IV) Dil, nesilden nesile aktarılan sözlü ve yazılı tüm eserlerin temelini oluşturur. (V) Bir toplumun kimliği ve varlığı, büyük ölçüde dilinin sağlığına ve gücüne bağlıdır. Bu parçadaki numaralanmış cümlelerden hangisi düşüncenin akışını bozmaktadır?",
        secenekler: {
            a: "I.",
            b: "II.",
            c: "III.",
            d: "IV.",
            e: "V."
        },
        dogruCevap: "d"
    },
    {
        soru: "7. I. Diller, zaman içinde değişime uğrayabilir ve yeni kelimelerle zenginleşebilir. II. Bu süreç, dilin canlılığını koruması ve güncel ihtiyaçlara cevap verebilmesi için önemlidir. III. Ancak bu değişikliklerin, dilin temel yapısını bozmayacak nitelikte olması gerekir. IV. Dilin yapısını koruma çabası, dilin saflığını muhafaza etme bilinciyle doğrudan ilişkilidir. V. Gereksiz yabancı kelime kullanımı ve dilbilgisi kurallarından sapma, dilin bozulmasına neden olur. Bu parçada numaralanmış cümlelerin anlamlı bir bütün oluşturması için aşağıdakilerden hangileri yer değiştirmelidir?",
        secenekler: {
            a: "I. ve II.",
            b: "IV. ve V.",
            c: "I. ve IV.",
            d: "II. ve V.",
            e: "III. ve IV."
        },
        dogruCevap: "b"
    },
    {
        soru: "8. I. Kış aylarında ortaya çıkan soğuk algınlığı, genellikle hafif seyreden ancak yaygın olarak görülen bir hastalıktır. II. Dinlenmek, bol sıvı tüketmek ve C vitamini almak, soğuk algınlığının belirtilerini hafifletmeye yardımcı olur. III. Bu hastalık, burun akıntısı, öksürük ve hafif ateş gibi belirtilerle kendini gösterir. IV. Soğuk algınlığına neden olan virüsler, çoğunlukla hava yoluyla veya temas yoluyla bulaşır. V. Grip ile karıştırılabilen bu durum, gripten farklı olarak daha yavaş başlar ve daha az şiddetlidir. Yukarıdaki numaralanmış cümlelerle anlamlı bir bütün oluşturulmak istenirse doğru sıralama aşağıdakilerden hangisi olur?",
        secenekler: {
            a: "I - III - V - II - IV",
            b: "I - II - III - V - IV",
            c: "I - III - V - IV - II",
            d: "I - V - III - IV - II",
            e: "I - IV - V - III - II"
        },
        dogruCevap: "c"
    },
    {
        soru: "9. Aşağıdaki cümlelerin hangisinde altı çizili sözcüğün anlamı, ayraç içinde verilen açıklamayla uyuşmamaktadır?",
        secenekler: {
            a: "Yazarın **akıcı** (sürükleyici) üslubu, okuyucuyu hikâyenin içine çekiyor.",
            b: "Köyün **huzurlu** (sakin, dingin) atmosferi, şehir hayatından kaçanlar için idealdi.",
            c: "Sanatçının **özgün** (kendine has, orijinal) eserleri, modern sanatın sınırlarını zorluyor.",
            d: "Bu **karmaşık** (anlaşılması zor) problemi çözmek için daha fazla zamana ihtiyacımız var.",
            e: "Yapılan **itiraz** (bir kararın geçerli olduğunu kabul etme), davanın seyrini değiştirdi."
        },
        dogruCevap: "e"
    },
    {
        soru: "10. Aşağıdaki cümlelerin hangisinde bir yazım yanlışı yapılmıştır?",
        secenekler: {
            a: "Peyami Safa'nın bu eserini 1950'li yıllarda okumuştum.",
            b: "Yazılı sınavdan 80 aldı ancak sözlüden düşük not geldi.",
            c: "Yurt dışından gelen misafirleri Atatürk Havalimanı'nda karşıladık.",
            d: "Gelecek hafta başlayacak olan kursa kayıt yaptıracağım.",
            e: "Sonuçlar 20 Mayıs'da açıklanacakmış, herkes heyecanla bekliyor."
        },
        dogruCevap: "b"
    },
    {
        soru: "11. Aşağıdaki cümlelerin hangisinde bir noktalama yanlışı yapılmıştır?",
        secenekler: {
            a: "Roman, hikâye, deneme gibi farklı türlerde eserler verdi.",
            b: "Öğretmen, 'Dersimize zamanında başlayacağız.' dedi.",
            c: "Ah, ne güzel bir manzara; insan bakmaya doyamıyor!",
            d: "Yeni aldığı evin; perdesi, halısı ve mobilyaları çok şık.",
            e: "Bu kararı verirken, tüm sonuçları düşünmek gerekir."
        },
        dogruCevap: "c"
    },
    {
        soru: "12. Aşağıdakilerin hangisi, yüklemi edilgen çatılı bir fiil olan cümledir?",
        secenekler: {
            a: "Çocuklar parkta neşeyle koşuyordu.",
            b: "Tüm hazırlıklar kısa sürede tamamlandı.",
            c: "Yazar, son eserinde toplumsal sorunlara değinmiş.",
            d: "Babam, bahçedeki ağaçları budadı.",
            e: "Sabah erkenden kalkıp spor yaptık."
        },
        dogruCevap: "b"
    },
    {
        soru: "13. Aşağıdaki cümlelerin hangisinde farklı türde bir tamlama kullanılmıştır?",
        secenekler: {
            a: "Pencerenin perdesi rüzgârda hafifçe sallanıyordu.",
            b: "Okulun bahçesi, öğrencilerle dolup taşıyordu.",
            c: "Mavi gömlek, ona çok yakışmıştı.",
            d: "Deniz suyunun sıcaklığı, yüzmek için idealdi.",
            e: "Evin kapısı, eski bir ahşaptan yapılmıştı."
        },
        dogruCevap: "c"
    },
    {
        soru: "14. Aşağıdaki cümlelerin hangisinde 'ki' bağlacı yanlış yazılmıştır?",
        secenekler: {
            a: "Duydum ki, beni unutmuşsun.",
            b: "O kadar yorgunum ki, ayakta duramıyorum.",
            c: "Sanki biraz da o haklı ki, susuyorsun.",
            d: "Evdeki hesap çarşıya uymadı.",
            e: "Bilmelisin ki, her zaman yanındayım."
        },
        dogruCevap: "c"
    },
    {
        soru: "15. Aşağıdaki cümlelerin hangisinde özne, bir söz grubundan oluşmamıştır?",
        secenekler: {
            a: "Uzun süren yolculuk nihayet bitti.",
            b: "Kırmızı kazaklı çocuk topu kaptı.",
            c: "Yeni taşındığımız mahalle oldukça sakindi.",
            d: "Bu zorlu sınavı herkes başarıyla geçti.",
            e: "Öğrenci, soruyu doğru cevapladı."
        },
        dogruCevap: "e"
    },
    {
        soru: "16. Aşağıdaki cümlelerin hangisinde zarf-fiil (bağ-fiil) kullanılmamıştır?",
        secenekler: {
            a: "Koşarak yanıma geldi ve bana sarıldı.",
            b: "Ders çalışırken müzik dinlemeyi sever.",
            c: "Gülerek anlattığı fıkralarla bizi güldürdü.",
            d: "Gelecek planları için birikim yapıyor.",
            e: "Soruları okumadan cevaplama."
        },
        dogruCevap: "d"
    },
    {
        soru: "17. Aşağıdaki cümlelerin hangisinde birleşik yapılı bir fiil vardır?",
        secenekler: {
            a: "Söylediklerini dikkatlice dinledi.",
            b: "Onu görünce birden bire kayboluverdi.",
            c: "Toplantı uzun sürünce herkes sıkıldı.",
            d: "Eski eşyaları tek tek ayırdı.",
            e: "Bütün gün evde oturduk."
        },
        dogruCevap: "b"
    },
    {
        soru: "18. Aşağıdaki cümlelerin hangisinde adlaşmış sıfat kullanılmıştır?",
        secenekler: {
            a: "Eski dostlar bir araya gelince çok eğlendik.",
            b: "Güneşli havaları herkes çok sever.",
            c: "Yaşlı, yoldan karşıya geçmeye çalışıyordu.",
            d: "Büyük evler genellikle daha pahalı olur.",
            e: "Yeşil elmalar daha ekşi olur."
        },
        dogruCevap: "c"
    },
    {
        soru: "19. Aşağıdaki cümlelerin hangisinde edat (ilgeç) kullanılmamıştır?",
        secenekler: {
            a: "Sabaha kadar ders çalıştı.",
            b: "Senin gibi bir dost bulmak zor.",
            c: "Çok yorgundu ama işi bitirdi.",
            d: "Kitapları rafa göre dizdi.",
            e: "Sadece senin için geldim."
        },
        dogruCevap: "c"
    },
    {
        soru: "20. Aşağıdaki cümlelerin hangisinde bağlaç kullanılmamıştır?",
        secenekler: {
            a: "Hem çalışıyor hem okuyor.",
            b: "Ne aradı ne sordu.",
            c: "Çay mı kahve mi istersin?",
            d: "Geldim fakat seni bulamadım.",
            e: "Yolda bir araba gördüm."
        },
        dogruCevap: "e"
    }
];

// --- DURUM DEĞİŞKENLERİ ---
let mevcutSoruIndex = 0; 
let kullaniciCevaplari = new Array(sorular.length).fill(null); 
let kalanSureSaniye = 30 * 60; // 30 dakika
let intervalId;
let sinavDevamEdiyor = true;

// --- DOM ELEMENTLERİ ---
const aktifSoruContainer = document.getElementById('aktif-soru-container');
const soruSayacElementi = document.getElementById('soru-sayac');
const ileriButonu = document.getElementById('ileri-butonu');
const bitirButonu = document.getElementById('bitir-butonu');
const sonucAlani = document.querySelector('.sonuc-alani');
const soruAlani = document.querySelector('.soru-alani');
const zamanlayiciElement = document.getElementById('zamanlayici');

// --- 1. SORUYU YÜKLEME FONKSİYONU ---
function soruyuGoster(index) {
    if (!sinavDevamEdiyor) return; // Sınav bitmişse yeni soru gösterme

    if (index >= 0 && index < sorular.length) {
        mevcutSoruIndex = index;
        const soruBilgisi = sorular[index];
        const soruNumarasi = index + 1;
        
        soruSayacElementi.textContent = soruNumarasi;

        let secenekHTML = '';
        
        for (const secenekHarfi in soruBilgisi.secenekler) {
            const isChecked = kullaniciCevaplari[index] === secenekHarfi ? 'checked' : '';
            
            secenekHTML += `
                <input type="radio" id="secenek-${secenekHarfi}" name="aktifSoruCevap" value="${secenekHarfi}" ${isChecked}>
                <label for="secenek-${secenekHarfi}" class="secenek-label">
                    ${secenekHarfi.toUpperCase()}: ${soruBilgisi.secenekler[secenekHarfi]}
                </label>
            `;
        }
        
        aktifSoruContainer.innerHTML = `
            <p><strong>${soruNumarasi}. Soru:</strong> ${soruBilgisi.soru}</p>
            <form id="soruFormu">${secenekHTML}</form>
        `;
        
        // Buton görünürlüğünü ayarla
        if (mevcutSoruIndex === sorular.length - 1) {
            ileriButonu.style.display = 'none';
            bitirButonu.style.display = 'block';
        } else {
            ileriButonu.style.display = 'block';
            bitirButonu.style.display = 'none';
        }
    }
}


// --- 2. CEVABI KAYDET VE SONRAKİ SORUYA GEÇ ---
function sonrakiSoru() {
    // 1. Mevcut cevabı kaydet
    const seciliCevapElementi = document.querySelector('input[name="aktifSoruCevap"]:checked');
    kullaniciCevaplari[mevcutSoruIndex] = seciliCevapElementi ? seciliCevapElementi.value : null;

    // 2. Bir sonraki soruya geç
    if (mevcutSoruIndex < sorular.length - 1) {
        soruyuGoster(mevcutSoruIndex + 1);
    } 
}


// --- 3. PUANLAMA VE BİTİRME FONKSİYONU ---
function testiBitir(süreBitti = false) {
    if (!sinavDevamEdiyor) return; // Zaten bitmişse tekrar çalıştırma

    sinavDevamEdiyor = false; // Sınavı bitir olarak işaretle

    // Test Bitir butonuna basıldığında son sorunun cevabını kaydet
    if (!süreBitti && mevcutSoruIndex === sorular.length - 1) {
        const sonSeciliCevapElementi = document.querySelector('input[name="aktifSoruCevap"]:checked');
        kullaniciCevaplari[sorular.length - 1] = sonSeciliCevapElementi ? sonSeciliCevapElementi.value : null;
    }

    clearInterval(intervalId); // Zamanlayıcıyı durdur

    let dogruSayisi = 0;
    let yanlisSayisi = 0;
    let bosSayisi = 0;
    const yanlisGötürmeKatsayısı = 0.25; 

    // Kaydedilen cevapları kontrol et
    kullaniciCevaplari.forEach((cevap, index) => {
        if (cevap === null) {
            bosSayisi++;
        } else if (cevap === sorular[index].dogruCevap) {
            dogruSayisi++;
        } else {
            yanlisSayisi++;
        }
    });

    const netDogru = dogruSayisi - (yanlisSayisi * yanlisGötürmeKatsayısı);
    const hamPuan = Math.max(0, (netDogru / sorular.length) * 100).toFixed(2); 

    document.getElementById('dogruSayisi').textContent = dogruSayisi;
    document.getElementById('yanlisSayisi').textContent = yanlisSayisi;
    document.getElementById('bosSayisi').textContent = bosSayisi;
    document.getElementById('hamPuan').textContent = hamPuan;

    sonucAlani.style.display = 'block';
    soruAlani.style.display = 'none';

    zamanlayiciElement.textContent = süreBitti ? "SÜRE DOLDU - TEST BİTTİ" : "TEST BİTİRİLDİ";

    alert(`Sınavınız tamamlandı! Ham Puanınız: ${hamPuan}`);
}

// --- 4. ZAMANLAYICI KODU ---
function sureyiGuncelle() {
    if (!sinavDevamEdiyor) return;

    const dakika = Math.floor(kalanSureSaniye / 60);
    const saniye = kalanSureSaniye % 60;

    const formatliDakika = String(dakika).padStart(2, '0');
    const formatliSaniye = String(saniye).padStart(2, '0');

    zamanlayiciElement.textContent = `Kalan Süre: ${formatliDakika}:${formatliSaniye}`;

    kalanSureSaniye--;

    if (kalanSureSaniye < 0) {
        testiBitir(true); 
    }
}

// --- 5. YENİDEN BAŞLATMA FONKSİYONU ---
function testiTekrarBaslat() {
    // 1. Değişkenleri sıfırla
    mevcutSoruIndex = 0;
    kullaniciCevaplari = new Array(sorular.length).fill(null);
    kalanSureSaniye = 30 * 60;
    sinavDevamEdiyor = true;

    // 2. Ekranları değiştir
    soruAlani.style.display = 'block';
    sonucAlani.style.display = 'none';
    
    // 3. İlk soruyu yükle
    soruyuGoster(0);

    // 4. Zamanlayıcıyı yeniden başlat
    intervalId = setInterval(sureyiGuncelle, 1000); 
    sureyiGuncelle();
}

// --- BAŞLATICI KISIM ---
document.addEventListener('DOMContentLoaded', () => {
    // Sayfa yüklendiğinde ilk soruyu göster ve zamanlayıcıyı başlat
    soruyuGoster(0);
    intervalId = setInterval(sureyiGuncelle, 1000); 
    sureyiGuncelle();
});
